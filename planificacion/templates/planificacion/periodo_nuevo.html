{% extends 'layouts.html' %}
{% load static %}

{% block planificacion_display %}display: block;{% endblock %}
{% block periodos_active %}link-current{% endblock %}

{% block content %}
  <!-- one box -->
  <div class="content-box mb-3">
    <h1 class="page-header">Nuevo periodo</h1>
    <form action="" method="POST">
      {% csrf_token %}

      <div class="row">
        <div class="col-md-6 form-group {% if periodo_form.codigo.errors %}parsley-error{% endif %}">
          {{ periodo_form.codigo }}
          {% if periodo_form.codigo.help_text %}
            <p class="help">{{ periodo_form.codigo.help_text|safe }}</p>
          {% endif %}
          {% for error in periodo_form.codigo.errors %}
            <p class="help-block">{{ error }}</p>
          {% endfor %}
        </div>
        
        <div class="col-md-6 form-group {% if periodo_form.nombre.errors %}parsley-error{% endif %}">
          {{ periodo_form.nombre }}
          {% if periodo_form.nombre.help_text %}
            <p class="help">{{ periodo_form.nombre.help_text|safe }}</p>
          {% endif %}
          {% for error in periodo_form.nombre.errors %}
            <p class="help-block">{{ error }}</p>
          {% endfor %}
        </div>
        
        <div class="col-md-6 form-group {% if periodo_form.fecha_inicio.errors %}parsley-error{% endif %}">
          {{ periodo_form.fecha_inicio }}
          {% if periodo_form.fecha_inicio.help_text %}
            <p class="help">{{ periodo_form.fecha_inicio.help_text|safe }}</p>
          {% endif %}
          {% for error in periodo_form.fecha_inicio.errors %}
            <p class="help-block">{{ error }}</p>
          {% endfor %}
        </div>

        <div class="col-md-6 form-group {% if periodo_form.fecha_fin.errors %}parsley-error{% endif %}">
          {{ periodo_form.fecha_fin }}
          {% if periodo_form.fecha_fin.help_text %}
            <p class="help">{{ periodo_form.fecha_fin.help_text|safe }}</p>
          {% endif %}
          {% for error in periodo_form.fecha_fin.errors %}
            <p class="help-block">{{ error }}</p>
          {% endfor %}
        </div>
      </div>

      <div class="row">
        {% for mp in mps %}
          <div class="col-md-6">
            <h2 class="page-header">{{mp.trimestre.parentId}}</h2>
            <table class="table table-hover">
              <input type="hidden" name="tt[]" value="{{mp.trimestre.parentId.pk}}">
              <thead>
                <tr>
                  <th>Unidad Curricular</th>
                  <th>Nº Hora</th>
                  <th>Nº Sección</th>
                </tr>
              </thead>
              <tbody>
                {% for a in mp.trimestre.parentId.malla_uce_sub_sub_estructura.all %}
                  <tr>
                    <td>{{a.unidad_credito.nombre}}</td>
                    <td>{{a.horas_total}}</td>
                    <td>{{mp.secciones}}</td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        {% endfor %}
      </div>
      <input class="btn btn-primary btn-block" type="submit" value="Guardar">
    </form>
  </div>
{% endblock %}

{% block javascript %}{% endblock %}
